{# Stepper component: 6 circles connected by lines #}
{% set steps = [
    { label: 'wizard.stepper.court'|trans },
    { label: 'wizard.stepper.claimant'|trans },
    { label: 'wizard.stepper.defendant'|trans },
    { label: 'wizard.stepper.claim'|trans },
    { label: 'wizard.stepper.evidence'|trans },
    { label: 'wizard.stepper.confirmation'|trans },
] %}

<nav class="mb-8" aria-label="{{ 'wizard.stepper.label'|trans }}">
    <ol class="flex items-center w-full">
        {% for s in steps %}
            {% set stepNum = loop.index %}
            {% set isCompleted = stepNum < currentStep %}
            {% set isCurrent = stepNum == step %}
            {% set isFuture = stepNum > currentStep %}
            {% set isClickable = stepNum <= currentStep and stepNum != step %}

            <li class="flex items-center {{ not loop.last ? 'flex-1' : '' }}">
                <div class="flex flex-col items-center">
                    {% if isClickable %}
                        <a href="{{ path('case_step', { id: legalCase.id, step: stepNum }) }}"
                           class="flex items-center justify-center w-8 h-8 rounded-full bg-primary-light text-white text-sm font-semibold no-underline hover:bg-primary transition-colors"
                           title="{{ s.label }}">
                            {% if isCompleted %}
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
                            {% else %}
                                {{ stepNum }}
                            {% endif %}
                        </a>
                    {% elseif isCurrent %}
                        <span class="flex items-center justify-center w-8 h-8 rounded-full border-2 border-primary-light text-primary-light text-sm font-bold">
                            {{ stepNum }}
                        </span>
                    {% else %}
                        <span class="flex items-center justify-center w-8 h-8 rounded-full bg-gray-200 text-gray-500 text-sm">
                            {{ stepNum }}
                        </span>
                    {% endif %}
                    <span class="mt-1 text-xs {{ isCurrent ? 'font-semibold text-primary' : (isCompleted ? 'text-primary-light' : 'text-gray-400') }} hidden sm:block text-center whitespace-nowrap">
                        {{ s.label }}
                    </span>
                </div>
                {% if not loop.last %}
                    <div class="flex-1 h-0.5 mx-2 {{ stepNum < currentStep ? 'bg-primary-light' : 'bg-gray-200' }}"></div>
                {% endif %}
            </li>
        {% endfor %}
    </ol>
</nav>
