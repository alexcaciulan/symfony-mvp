{{ form_start(form) }}

<div class="space-y-6">
    {# Claim amount #}
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div>
            {{ form_label(form.claimAmount, null, { label_attr: { class: 'block text-sm font-medium text-gray-700 mb-1' }}) }}
            <div class="relative">
                {{ form_widget(form.claimAmount, { attr: { class: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-light pr-12' }}) }}
                <span class="absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500">RON</span>
            </div>
            {{ form_errors(form.claimAmount) }}
            <p class="text-xs text-gray-400 mt-1">{{ 'wizard.step4.amount_hint'|trans }}</p>
        </div>
        <div>
            {{ form_label(form.dueDate, null, { label_attr: { class: 'block text-sm font-medium text-gray-700 mb-1' }}) }}
            {{ form_widget(form.dueDate, { attr: { class: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-light' }}) }}
        </div>
    </div>

    {# Description #}
    <div>
        {{ form_label(form.claimDescription, null, { label_attr: { class: 'block text-sm font-medium text-gray-700 mb-1' }}) }}
        {{ form_widget(form.claimDescription, { attr: { class: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-light' }}) }}
        {{ form_errors(form.claimDescription) }}
    </div>

    {# Legal basis #}
    <div>
        {{ form_label(form.legalBasis, null, { label_attr: { class: 'block text-sm font-medium text-gray-700 mb-1' }}) }}
        {{ form_widget(form.legalBasis, { attr: { class: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-light' }}) }}
        <p class="text-xs text-gray-400 mt-1">{{ 'wizard.step4.legal_basis_hint'|trans }}</p>
    </div>

    {# Interest #}
    <fieldset class="border border-gray-200 rounded-lg p-4" data-controller="conditional-fields" data-conditional-fields-show-value="contractual">
        <legend class="text-sm font-medium text-gray-700 px-2">{{ 'wizard.step4.interest_section'|trans }}</legend>

        <div class="mb-4">
            {{ form_label(form.interestType, null, { label_attr: { class: 'block text-sm font-medium text-gray-700 mb-1' }}) }}
            {{ form_widget(form.interestType, { attr: {
                class: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-light',
                'data-conditional-fields-target': 'source',
                'data-action': 'change->conditional-fields#toggle',
            }}) }}
        </div>

        <div data-conditional-fields-target="conditional" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
                {{ form_label(form.interestRate, null, { label_attr: { class: 'block text-sm font-medium text-gray-700 mb-1' }}) }}
                <div class="relative">
                    {{ form_widget(form.interestRate, { attr: { class: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-light pr-8' }}) }}
                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500">%</span>
                </div>
            </div>
            <div>
                {{ form_label(form.interestStartDate, null, { label_attr: { class: 'block text-sm font-medium text-gray-700 mb-1' }}) }}
                {{ form_widget(form.interestStartDate, { attr: { class: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-light' }}) }}
            </div>
        </div>
    </fieldset>

    {# Court costs #}
    <div class="flex items-center gap-2">
        {{ form_widget(form.requestCourtCosts, { attr: { class: 'rounded text-primary-light focus:ring-primary-light' }}) }}
        {{ form_label(form.requestCourtCosts, null, { label_attr: { class: 'text-sm font-medium text-gray-700' }}) }}
    </div>
</div>

{# Actions #}
<div class="flex justify-between mt-8">
    <a href="{{ path('case_step', { id: legalCase.id, step: step - 1 }) }}" class="px-6 py-2.5 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors no-underline">
        {{ 'wizard.previous'|trans }}
    </a>
    <button type="submit" class="px-6 py-2.5 bg-primary-light text-white rounded-lg font-medium hover:bg-primary transition-colors">
        {{ 'wizard.next'|trans }}
    </button>
</div>

{{ form_end(form) }}
