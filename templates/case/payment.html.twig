{% extends 'base.html.twig' %}

{% block title %}{{ 'payment.title'|trans({ '%id%': legalCase.id }) }} - {{ parent() }}{% endblock %}

{% block body %}
<div class="max-w-lg mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="mb-6">
        <a href="{{ path('case_view', { id: legalCase.id }) }}" class="text-sm text-primary-light hover:text-primary no-underline">
            &larr; {{ 'payment.back_to_case'|trans }}
        </a>
    </div>

    <h1 class="text-xl font-bold text-primary mb-6">{{ 'payment.title'|trans({ '%id%': legalCase.id }) }}</h1>

    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 sm:p-8">
        {# Fee summary #}
        <div class="bg-blue-50 rounded-lg p-5 border border-blue-200 mb-6">
            <h3 class="text-sm font-semibold text-gray-700 mb-3">{{ 'payment.fee_summary'|trans }}</h3>
            <dl class="space-y-2">
                <div class="flex justify-between text-sm">
                    <dt class="text-gray-600">{{ 'payment.court_fee'|trans }}</dt>
                    <dd class="text-gray-800">{{ legalCase.courtFee|number_format(2, ',', '.') }} RON</dd>
                </div>
                <div class="flex justify-between text-sm">
                    <dt class="text-gray-600">{{ 'payment.platform_fee'|trans }}</dt>
                    <dd class="text-gray-800">{{ legalCase.platformFee|number_format(2, ',', '.') }} RON</dd>
                </div>
                <div class="flex justify-between text-sm font-bold border-t border-blue-200 pt-2 mt-2">
                    <dt class="text-gray-800">{{ 'payment.total'|trans }}</dt>
                    <dd class="text-primary">{{ legalCase.totalFee|number_format(2, ',', '.') }} RON</dd>
                </div>
            </dl>
        </div>

        {# Simulator notice #}
        <div class="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6">
            <div class="flex items-start gap-3">
                <svg class="w-5 h-5 text-amber-500 mt-0.5 shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.168 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
                </svg>
                <p class="text-sm text-amber-800">{{ 'payment.simulator_notice'|trans }}</p>
            </div>
        </div>

        {# Payment form #}
        <form method="post" action="{{ path('case_payment_process', { id: legalCase.id }) }}">
            <input type="hidden" name="_token" value="{{ csrf_token('payment-process-' ~ legalCase.id) }}">
            <button type="submit" class="w-full px-6 py-3 bg-green-600 text-white rounded-lg font-semibold text-base hover:bg-green-700 transition-colors cursor-pointer">
                {{ 'payment.pay_button'|trans({ '%amount%': legalCase.totalFee|number_format(2, ',', '.') }) }}
            </button>
        </form>
    </div>
</div>
{% endblock %}
